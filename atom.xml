<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://ihopefulchina.github.io</id>
    <title>Ihopeful Blog</title>
    <updated>2023-11-24T02:41:58.556Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://ihopefulchina.github.io"/>
    <link rel="self" href="https://ihopefulchina.github.io/atom.xml"/>
    <subtitle>Sweat is the lubricant of success.</subtitle>
    <logo>https://ihopefulchina.github.io/images/avatar.png</logo>
    <icon>https://ihopefulchina.github.io/favicon.ico</icon>
    <rights>All rights reserved 2023, Ihopeful Blog</rights>
    <entry>
        <title type="html"><![CDATA[uniapp_template ]]></title>
        <id>https://ihopefulchina.github.io/uniapp_template /</id>
        <link href="https://ihopefulchina.github.io/uniapp_template /">
        </link>
        <updated>2023-11-24T02:37:20.000Z</updated>
        <summary type="html"><![CDATA[<h1 id="uni-app-vue3-vite4-pinia2-typescript-åŸºç¡€æ¡†æ¶">ğŸŒˆ uni-app Vue3 Vite4 pinia2 TypeScript åŸºç¡€æ¡†æ¶</h1>
<p>uni-app Vue3 Vite4 pinia2 TypeScript åŸºç¡€æ¡†æ¶</p>
]]></summary>
        <content type="html"><![CDATA[<h1 id="uni-app-vue3-vite4-pinia2-typescript-åŸºç¡€æ¡†æ¶">ğŸŒˆ uni-app Vue3 Vite4 pinia2 TypeScript åŸºç¡€æ¡†æ¶</h1>
<p>uni-app Vue3 Vite4 pinia2 TypeScript åŸºç¡€æ¡†æ¶</p>
<!-- more -->
<h3 id="git-åœ°å€">git åœ°å€</h3>
<pre><code class="language-shell">git@github.com:ihopefulChina/uniapp_template.git
</code></pre>
<h3 id="é¡¹ç›®åœ°å€">é¡¹ç›®åœ°å€</h3>
<pre><code class="language-shell">https://github.com/ihopefulChina/uniapp_template
</code></pre>
<h2 id="ç›®å½•ç»“æ„">ç›®å½•ç»“æ„</h2>
<pre><code class="language-shell">.
â”œâ”€ src
â”‚   â”œâ”€assets # é™æ€èµ„æºç›®å½•
â”‚   â”‚
â”‚   â”œâ”€components # ç»„ä»¶ç›®å½•
â”‚   â”‚   â”œâ”€ Components
â”‚   â”‚   â”‚    â”œâ”€index.vue
â”‚   â”‚   â”‚    â””â”€prpos.ts
â”‚   â”‚   â””â”€...
â”‚   â”‚
â”‚   â”œâ”€enums # æšä¸¾/å¸¸é‡
â”‚   â”‚   â”œâ”€ cacheEnum.ts
â”‚   â”‚   â””â”€...
â”‚   â”‚
â”‚   â”œâ”€pages # é¡µé¢
â”‚   â”‚   â”œâ”€ index
â”‚   â”‚   â”‚    â””â”€index.vue
â”‚   â”‚   â””â”€...
â”‚   â”‚
â”‚   â”œâ”€request # æ¥å£ç›¸å…³
â”‚   â”‚
â”‚   â”œâ”€state # çŠ¶æ€ç®¡ç†æ¨¡å¼(pinia)
â”‚   â”‚   â”œâ”€ modules # æ•°æ®æ¨¡å—
â”‚   â”‚   â”‚    â”œâ”€auth.ts
â”‚   â”‚   â”‚    â””â”€...
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€static # é™æ€å…¬å…±æ–‡ä»¶
â”‚   â”‚   â”œâ”€ images # å›¾ç‰‡
â”‚   â”‚   â”‚    â”œâ”€avatar.png
â”‚   â”‚   â”‚    â””â”€...
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€ ...
â”‚   â”‚
â”‚   â”œâ”€types # ç±»å‹æ–‡ä»¶
â”‚   â”‚   â”œâ”€ http.d.ts
â”‚   â”‚   â””â”€ ...
â”‚   â”‚
â”‚   â””â”€utils # å·¥å…·ç±»
â”‚
â”œâ”€ .eslintignore
â”œâ”€ .eslintrc.js
â”œâ”€ .gitignore
â”œâ”€ .prettierignore
â”œâ”€ .prettierrc.js
â”œâ”€ favicon.ico
â”œâ”€ index.html
â”œâ”€ package.json
â”œâ”€ pnpm-lock.yaml
â”œâ”€ README.md
â”œâ”€ tree.txt
â”œâ”€ tsconfig.json
â””â”€ vite.config.ts

</code></pre>
<h2 id="å®‰è£…ä½¿ç”¨">å®‰è£…ä½¿ç”¨</h2>
<ul>
<li>å®‰è£…ä¾èµ–</li>
</ul>
<pre><code class="language-bash">pnpm install
</code></pre>
<ul>
<li>è¿è¡Œ</li>
</ul>
<pre><code class="language-bash"># å…¶ä»–ç«¯è¯·æŸ¥çœ‹ package.json script
pnpm dev:h5
</code></pre>
<ul>
<li>æ‰“åŒ…</li>
</ul>
<pre><code class="language-bash"># å…¶ä»–ç«¯è¯·æŸ¥çœ‹ package.json script
pnpm build:h5
</code></pre>
<ul>
<li>æ›´æ–°ä¾èµ–åˆ°æœ€æ–°ï¼ˆæ–°æ‰‹è¯·å¿½ç•¥ï¼‰</li>
</ul>
<pre><code class="language-bash">pnpm up
# æ‰“å¼€HBuilder X alphaæ¡Œé¢ç¨‹åº--&gt;ç‚¹å‡»ä¸Šé¢çš„å¸®åŠ©--&gt;å†æ¬¡æ›´æ–°è¯´æ˜--&gt;è·å–æœ€æ–°ç‰ˆæœ¬å·ï¼ˆå¦‚ï¼š3.7.2.20230217-alphaï¼‰
npx @dcloudio/uvm 3.7.2.20230217-alpha
</code></pre>
<h3 id="mac-m1-arm-èŠ¯ç‰‡-è¿è¡ŒæŠ¥é”™">Mac m1 ARM èŠ¯ç‰‡ è¿è¡ŒæŠ¥é”™</h3>
<pre><code class="language-bash">pnpm add @esbuild/darwin-x64@0.17.19 -D
</code></pre>
<h3 id="æäº¤ç±»å‹">æäº¤ç±»å‹</h3>
<table>
<thead>
<tr>
<th>æäº¤ç±»å‹</th>
<th>æ ‡é¢˜</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>feat</code></td>
<td>ç‰¹å¾</td>
<td>æ–°åŠŸèƒ½ã€æ–°ç‰¹æ€§</td>
</tr>
<tr>
<td><code>fix</code></td>
<td>Bug ä¿®å¤</td>
<td>bug ä¿®å¤</td>
</tr>
<tr>
<td><code>docs</code></td>
<td>æ–‡æ¡£</td>
<td>ä»…æ–‡æ¡£æ›´æ”¹</td>
</tr>
<tr>
<td><code>style</code></td>
<td>é£æ ¼</td>
<td>ä¸å½±å“ä»£ç å«ä¹‰çš„æ›´æ”¹ï¼ˆç©ºæ ¼ã€æ ¼å¼ã€ç¼ºå°‘åˆ†å·ç­‰ï¼‰</td>
</tr>
<tr>
<td><code>refactor</code></td>
<td>ä»£ç é‡æ„</td>
<td>é‡æ„ï¼Œåœ¨ä¸å½±å“ä»£ç å†…éƒ¨è¡Œä¸ºï¼ŒåŠŸèƒ½ä¸‹çš„ä»£ç ä¿®æ”¹</td>
</tr>
<tr>
<td><code>perf</code></td>
<td>æ€§èƒ½æ”¹è¿›</td>
<td>æ›´æ”¹ä»£ç ï¼Œä»¥æé«˜æ€§èƒ½</td>
</tr>
<tr>
<td><code>test</code></td>
<td>æµ‹è¯•</td>
<td>æ·»åŠ ç¼ºå¤±çš„æµ‹è¯•æˆ–çº æ­£ç°æœ‰çš„æµ‹è¯•</td>
</tr>
<tr>
<td><code>build</code></td>
<td>æ„å»º</td>
<td>å½±å“æ„å»ºç³»ç»Ÿæˆ–å¤–éƒ¨ä¾èµ–é¡¹çš„æ›´æ”¹ï¼ˆç¤ºä¾‹èŒƒå›´ï¼šgulpã€broccoliã€npmï¼‰</td>
</tr>
<tr>
<td><code>ci</code></td>
<td>æŒç»­é›†æˆ</td>
<td>å¯¹æˆ‘ä»¬çš„ CI é…ç½®æ–‡ä»¶å’Œè„šæœ¬çš„æ›´æ”¹ï¼ˆç¤ºä¾‹èŒƒå›´ï¼šTravisã€Circleã€BrowserStackã€SauceLabsï¼‰</td>
</tr>
<tr>
<td><code>chore</code></td>
<td>å…¶ä»–æ–‡ä»¶ä¿®æ”¹</td>
<td>ä¸ä¿®æ”¹ src æˆ–æµ‹è¯•æ–‡ä»¶çš„å…¶ä»–æ›´æ”¹</td>
</tr>
<tr>
<td><code>revert</code></td>
<td>è¿˜åŸ</td>
<td>æ¢å¤ä¹‹å‰çš„æäº¤</td>
</tr>
<tr>
<td><code>release</code></td>
<td>å‘å¸ƒæ–°ç‰ˆæœ¬</td>
<td>-</td>
</tr>
<tr>
<td><code>workflow</code></td>
<td>å·¥ä½œæµç›¸å…³æ–‡ä»¶ä¿®æ”¹</td>
<td>-</td>
</tr>
</tbody>
</table>
<h3 id="æäº¤åˆ«å">æäº¤åˆ«å</h3>
<table>
<thead>
<tr>
<th>æäº¤ç±»å‹</th>
<th>æ˜ å°„åˆ°</th>
<th>æ ‡é¢˜</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>initial</code></td>
<td><code>feat</code></td>
<td>æœ€åˆçš„</td>
<td>åˆå§‹æäº¤</td>
</tr>
<tr>
<td><code>dependencies</code></td>
<td><code>fix</code></td>
<td>ä¾èµ–é¡¹</td>
<td>æ›´æ–°ä¾èµ–é¡¹</td>
</tr>
<tr>
<td><code>peerDependencies</code></td>
<td><code>fix</code></td>
<td>å¯¹ç­‰ä¾èµ–</td>
<td>æ›´æ–°å¯¹ç­‰ä¾èµ–é¡¹</td>
</tr>
<tr>
<td><code>devDependencies</code></td>
<td><code>chore</code></td>
<td>å¼€å‘ä¾èµ–</td>
<td>æ›´æ–°å¼€å‘ä¾èµ–</td>
</tr>
<tr>
<td><code>metadata</code></td>
<td><code>fix</code></td>
<td>å…ƒæ•°æ®</td>
<td>æ›´æ–°å…ƒæ•°æ®ï¼ˆpackage.jsonï¼‰</td>
</tr>
</tbody>
</table>
<h3 id="å¿«æ·åˆ«åæç¤º">å¿«æ·åˆ«åæç¤º</h3>
<ol>
<li>resolve a conflictï¼šè§£å†³å†²çª</li>
<li>merge branchï¼šåˆå¹¶åˆ†æ”¯</li>
<li>feat: [...] : æ·»åŠ çš„æ–°åŠŸèƒ½è¯´æ˜</li>
<li>fix: [...] : ä¿®å¤çš„ bug è¯´æ˜</li>
<li>initial projectï¼šåˆå§‹åŒ–é¡¹ç›®</li>
<li>style: [...] : ä¿®æ”¹çš„æ ·å¼èŒƒå›´</li>
<li>perfï¼š[...] : ä¼˜åŒ–çš„èŒƒå›´</li>
<li>release : å‘å¸ƒæ–°ç‰ˆæœ¬</li>
<li>docs: æ–‡æ¡£ä¿®æ”¹</li>
<li>refactorï¼š ä»£ç é‡æ„</li>
<li>revertï¼š è¿˜åŸä¹‹å‰çš„ç‰ˆæœ¬</li>
<li>dependenciesï¼š ä¾èµ–é¡¹ä¿®æ”¹</li>
<li>devDependenciesï¼š å¼€å‘ä¾èµ–ä¿®æ”¹</li>
<li>reviewï¼šå¤ä¹ ï¼Œå›é¡¾</li>
<li>strengthen: åŠ å¼ºï¼Œå·©å›º</li>
</ol>
<h3 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h3>
<ul>
<li><a href="https://v3.cn.vuejs.org/guide/introduction.html">Vue3.0 å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://docs.qq.com/doc/DZG5yRHdzbnhYQlNC">uni-app + vue3 å¼€å‘æ–‡æ¡£</a></li>
<li><a href="https://uniapp.dcloud.io/frame?id=vue-support">uni-app å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://vue3.tuniaokj.com/zh-CN/">TuniaoUI å®˜æ–¹ç»„ä»¶åº“</a></li>
<li><a href="https://pinia.vuejs.org/introduction.html">pinia</a></li>
</ul>
<!-- more -->
<!-- more -->
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[taro SwipeCell æ»‘åŠ¨å•å…ƒæ ¼ç»„ä»¶]]></title>
        <id>https://ihopefulchina.github.io/0ZUzQJonb/</id>
        <link href="https://ihopefulchina.github.io/0ZUzQJonb/">
        </link>
        <updated>2022-08-15T06:27:50.000Z</updated>
        <summary type="html"><![CDATA[<h3 id="åŸºäºtaro3-reactçš„-taro-swipecell-æ»‘åŠ¨å•å…ƒæ ¼ç»„ä»¶">åŸºäºTaro3ã€Reactçš„ taro SwipeCell æ»‘åŠ¨å•å…ƒæ ¼ç»„ä»¶</h3>
<h4 id="å¤ç”¨æ€§å¾ˆä½ä¸»è¦æä¾›ä¸€ä¸ªæ€è·¯-ä½¿ç”¨scrollview-ä¼šæœ‰åœ¨éƒ¨åˆ†çœŸæœºè®¾å¤‡æœ‰å…¼å®¹æ€§é—®é¢˜ä½¿ç”¨movableviewæ–¹å¼é¡µé¢æ»‘åŠ¨å°±ä¼šæœ‰é—®é¢˜ç›®å‰è¿™æ ·æ€è·¯æ˜¯æœ€ä¼˜è§£å†³æ–¹æ¡ˆ">å¤ç”¨æ€§å¾ˆä½ï¼Œä¸»è¦æä¾›ä¸€ä¸ªæ€è·¯ï¼Œ ä½¿ç”¨ScrollView ä¼šæœ‰åœ¨éƒ¨åˆ†çœŸæœºè®¾å¤‡æœ‰å…¼å®¹æ€§é—®é¢˜ï¼›ä½¿ç”¨MovableViewæ–¹å¼é¡µé¢æ»‘åŠ¨å°±ä¼šæœ‰é—®é¢˜ï¼Œç›®å‰è¿™æ ·æ€è·¯æ˜¯æœ€ä¼˜è§£å†³æ–¹æ¡ˆã€‚</h4>
]]></summary>
        <content type="html"><![CDATA[<h3 id="åŸºäºtaro3-reactçš„-taro-swipecell-æ»‘åŠ¨å•å…ƒæ ¼ç»„ä»¶">åŸºäºTaro3ã€Reactçš„ taro SwipeCell æ»‘åŠ¨å•å…ƒæ ¼ç»„ä»¶</h3>
<h4 id="å¤ç”¨æ€§å¾ˆä½ä¸»è¦æä¾›ä¸€ä¸ªæ€è·¯-ä½¿ç”¨scrollview-ä¼šæœ‰åœ¨éƒ¨åˆ†çœŸæœºè®¾å¤‡æœ‰å…¼å®¹æ€§é—®é¢˜ä½¿ç”¨movableviewæ–¹å¼é¡µé¢æ»‘åŠ¨å°±ä¼šæœ‰é—®é¢˜ç›®å‰è¿™æ ·æ€è·¯æ˜¯æœ€ä¼˜è§£å†³æ–¹æ¡ˆ">å¤ç”¨æ€§å¾ˆä½ï¼Œä¸»è¦æä¾›ä¸€ä¸ªæ€è·¯ï¼Œ ä½¿ç”¨ScrollView ä¼šæœ‰åœ¨éƒ¨åˆ†çœŸæœºè®¾å¤‡æœ‰å…¼å®¹æ€§é—®é¢˜ï¼›ä½¿ç”¨MovableViewæ–¹å¼é¡µé¢æ»‘åŠ¨å°±ä¼šæœ‰é—®é¢˜ï¼Œç›®å‰è¿™æ ·æ€è·¯æ˜¯æœ€ä¼˜è§£å†³æ–¹æ¡ˆã€‚</h4>
<!-- more -->
<figure data-type="image" tabindex="1"><img src="https://ihopefulchina.github.io/post-images/1660545280598.png" alt="" loading="lazy"></figure>
<h1 id="å®‰è£…">å®‰è£…</h1>
<pre><code class="language-bash">npm install taro-swipe-cell
</code></pre>
<h1 id="å¯¼å…¥ç»„ä»¶">å¯¼å…¥ç»„ä»¶</h1>
<pre><code class="language-js">import MySwipeCell from 'taro-swipe-cell'
</code></pre>
<h1 id="å‚æ•°è¯´æ˜">å‚æ•°è¯´æ˜</h1>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>æè¿°</th>
<th>ç±»å‹</th>
<th>å¿…ä¼ </th>
<th>é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>deleteItem</code></td>
<td>åˆ é™¤äº‹ä»¶</td>
<td>Function</td>
<td>æ˜¯</td>
<td><code>() =&gt; void</code></td>
</tr>
<tr>
<td><code>children</code></td>
<td>children</td>
<td>React.children</td>
<td>æ˜¯</td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="ä½¿ç”¨">ä½¿ç”¨</h1>
<pre><code class="language-jsx">import { FC, memo } from 'react'
import MySwipeCell from 'taro-swipe-cell'
import Taro from '@tarojs/taro'

import { View } from '@tarojs/components'


const Component: FC = () =&gt; {
 // åˆ é™¤å½“å‰item
  const delItem = item =&gt; {
  }

  return (
    &lt;&gt;
       &lt;MySwipeCell deleteItem={() =&gt; delItem(item)}&gt;
        &lt;View className={styles.item}&gt;
          1111
        &lt;/View&gt;
      &lt;/MySwipeCell&gt;
    &lt;/&gt;
  )
}

const Mall = memo(Component)
export default Mall


</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[huangpengfei-js-tools]]></title>
        <id>https://ihopefulchina.github.io/odFd8wVk4/</id>
        <link href="https://ihopefulchina.github.io/odFd8wVk4/">
        </link>
        <updated>2022-08-09T05:41:01.000Z</updated>
        <summary type="html"><![CDATA[<h1 id="huangpengfei-js-tools">huangpengfei-js-tools</h1>
<p>æ•´ç†å·¥ä½œä¸­å¸¸ç”¨çš„JavaScriptã€Taroã€Hooksæ–¹æ³•åˆé›†</p>
]]></summary>
        <content type="html"><![CDATA[<h1 id="huangpengfei-js-tools">huangpengfei-js-tools</h1>
<p>æ•´ç†å·¥ä½œä¸­å¸¸ç”¨çš„JavaScriptã€Taroã€Hooksæ–¹æ³•åˆé›†</p>
<!-- more -->
<h1 id="å®‰è£…">å®‰è£…</h1>
<pre><code class="language-bash">npm install huangpengfei-js-tools
</code></pre>
<h1 id="å¼•å…¥æ–¹æ³•">å¼•å…¥æ–¹æ³•</h1>
<pre><code class="language-js">import { xxx } from 'huangpengfei-js-tools'
</code></pre>
<h1 id="ç”¨ä¾‹">ç”¨ä¾‹</h1>
<pre><code class="language-jsx">/* ç»„ä»¶ -- å®˜æ–¹å¤šåˆ—é€‰æ‹©å™¨ä½¿ç”¨ */
import { memo } from 'react'
import Taro from '@tarojs/taro'
import { Picker } from '@tarojs/components'
import { useFile2Txt, useMultiSelectorTree } from 'huangpengfei-js-tools'

interface IProps {
  children: any
  onChange: any
  value: any
  disabled?: boolean
}

const Component = ({ children, value, onChange, disabled }: IProps) =&gt; {
  const rangeKey = 'value'
  const { nodes = [] as any } = useFile2Txt(jsonUrl)
  const { valueIndex, range, onColumnChange, onCancel } = useMultiSelectorTree({ value, list: nodes, depth: 3, rangeKey })

  // ç‚¹å‡»
  const onChangeCity = event =&gt; {
    const { value: values } = event?.detail
    if (onChange) {
      const item = values.map((it, index) =&gt; {
        return range[index][it]
      })
      onChange(item)
    }
  }

  return (
    &lt;Picker
      mode=&quot;multiSelector&quot;
      range={range}
      value={valueIndex}
      disabled={disabled}
      onCancel={onCancel}
      onColumnChange={onColumnChange}
      onChange={onChangeCity}
      rangeKey={rangeKey}
    &gt;
      {children}
    &lt;/Picker&gt;
  )
}

export default memo(Component)


</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Taro Parabola]]></title>
        <id>https://ihopefulchina.github.io/taro-parabola/</id>
        <link href="https://ihopefulchina.github.io/taro-parabola/">
        </link>
        <updated>2022-07-01T03:38:57.000Z</updated>
        <summary type="html"><![CDATA[<h1 id="taro-parabola">taro-parabola</h1>
<p>åŸºäºTaro3ã€Reactçš„H5å’Œå¾®ä¿¡å°ç¨‹åºæ·»åŠ åˆ°è´­ç‰©è½¦æŠ›ç‰©çº¿åŠ¨ç”»ç»„ä»¶</p>
]]></summary>
        <content type="html"><![CDATA[<h1 id="taro-parabola">taro-parabola</h1>
<p>åŸºäºTaro3ã€Reactçš„H5å’Œå¾®ä¿¡å°ç¨‹åºæ·»åŠ åˆ°è´­ç‰©è½¦æŠ›ç‰©çº¿åŠ¨ç”»ç»„ä»¶</p>
<!-- more -->
<figure data-type="image" tabindex="1"><img src="https://ihopefulchina.github.io/post-images/1656646769406.gif" alt="" loading="lazy"></figure>
<h1 id="å®‰è£…">å®‰è£…</h1>
<pre><code class="language-bash">npm install taro-parabola
</code></pre>
<h1 id="å¯¼å…¥ç»„ä»¶">å¯¼å…¥ç»„ä»¶</h1>
<pre><code class="language-js">import Parabola from 'taro-parabola'
</code></pre>
<h1 id="å‚æ•°è¯´æ˜">å‚æ•°è¯´æ˜</h1>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>æè¿°</th>
<th>ç±»å‹</th>
<th>å¿…ä¼ </th>
<th>é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cartX</code></td>
<td>è´­ç‰©è½¦ æ‰€åœ¨åæ ‡çš„xå€¼</td>
<td>number</td>
<td>æ˜¯</td>
<td><code>screenWidth</code></td>
</tr>
<tr>
<td><code>cartY</code></td>
<td>è´­ç‰©è½¦ æ‰€åœ¨åæ ‡çš„yå€¼</td>
<td>number</td>
<td>æ˜¯</td>
<td><code>screenHeight - 60</code></td>
</tr>
<tr>
<td><code>onChange</code></td>
<td>ç‚¹å‡»å›è°ƒæ–¹æ³•</td>
<td>Function</td>
<td>å¦</td>
<td><code>() =&gt; void</code></td>
</tr>
<tr>
<td><code>parabolaStyle</code></td>
<td>æŠ›ç‰©çº¿æ ·å¼</td>
<td>React.CSSProperties</td>
<td>å¦</td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="ä½¿ç”¨">ä½¿ç”¨</h1>
<pre><code class="language-jsx">import { FC, memo, useEffect, useState } from 'react'
import Parabola from 'taro-parabola'
import Taro from '@tarojs/taro'

import { View } from '@tarojs/components'

 const list = [1, 2, 3, 4, 5]
const Component: FC = () =&gt; {
  const [cartInfo, setCartInfo] = useState({} as any)

  useEffect(() =&gt; {
    Taro.nextTick(() =&gt; {
      Taro.createSelectorQuery()
        .select(`#cart`)
        .boundingClientRect(info =&gt; {
          setCartInfo(info)
        })
        .exec()
    })
  }, [])

  return (
    &lt;&gt;
      {list.map(item =&gt; (
        &lt;Parabola
          cartX={cartInfo.left}
          cartY={cartInfo.top}
          parabolaStyle={{ width: '15px', height: '15px', backgroundColor: '#333' }}
          onChange={() =&gt; {}}
          key={item}
        &gt;
          {item}
        &lt;/Parabola&gt;
      ))}
      &lt;View id=&quot;cart&quot;&gt;æˆ‘æ˜¯è´­ç‰©è½¦&lt;/View&gt;
    &lt;/&gt;
  )
}

const Mall = memo(Component)
export default Mall


</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å°è£…è…¾è®¯å³æ—¶é€šè®¯ for å°ç¨‹åº]]></title>
        <id>https://ihopefulchina.github.io/IZbWBmM7v/</id>
        <link href="https://ihopefulchina.github.io/IZbWBmM7v/">
        </link>
        <updated>2021-07-22T06:15:47.000Z</updated>
        <summary type="html"><![CDATA[<p>é€‚ç”¨å°ç¨‹åº(Taro)æ¥å…¥è…¾è®¯å³æ—¶é€šè®¯ã€‚<br>
è´´ä¸‹Githubåœ°å€ï¼š<a href="https://github.com/ihopefulChina/tim-for-weapp-Taro">https://github.com/ihopefulChina/tim-for-weapp-Taro</a></p>
]]></summary>
        <content type="html"><![CDATA[<p>é€‚ç”¨å°ç¨‹åº(Taro)æ¥å…¥è…¾è®¯å³æ—¶é€šè®¯ã€‚<br>
è´´ä¸‹Githubåœ°å€ï¼š<a href="https://github.com/ihopefulChina/tim-for-weapp-Taro">https://github.com/ihopefulChina/tim-for-weapp-Taro</a></p>
<!-- more -->
<h3 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h3>
<ol>
<li><a href="https://cloud.tencent.com/document/product/269/37411">SDK APIï¼ˆWeb &amp; å°ç¨‹åºï¼‰</a></li>
<li><a href="https://blog.csdn.net/weixin_42311676/article/details/105866973?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.add_param_isCf&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.add_param_isCf">å¾®ä¿¡å°ç¨‹åºåŸç”Ÿæ¥å…¥è…¾è®¯äº‘im</a></li>
<li><a href="https://blog.csdn.net/weixin_44622984/article/details/109626266">åŸç”ŸJSé›†æˆè…¾è®¯IMå®æ—¶èŠå¤©/å®æ—¶éŸ³è§†é¢‘</a></li>
<li><a href="https://blog.csdn.net/qq_29789057/article/details/89396550?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-1&amp;spm=1001.2101.3001.4242">å¾®ä¿¡å°ç¨‹åºåˆ©ç”¨è…¾è®¯äº‘IMå³æ—¶é€šè®¯å‘é€æ–‡å­—+è¡¨æƒ…å¼€å‘ï¼‰</a></li>
</ol>
<pre><code>import Taro from &quot;@tarojs/taro&quot;;
import TIM from 'tim-wx-sdk';
import COS from &quot;cos-wx-sdk-v5&quot;
import TIMUploadPlugin from 'tim-upload-plugin';
import roomStore from &quot;~/store/room&quot;;
import timStore from '~/store/tim'
//sdk
import { timSDK } from &quot;~/config&quot;

import { get } from &quot;~/components/request&quot;;

const userInfo = (Taro.getStorageSync('userInfo')) as any;
// åˆå§‹åŒ–
const iminit_TIM = async () =&gt; {
  const options = {
    SDKAppID: timSDK // æ¥å…¥æ—¶éœ€è¦å°†0æ›¿æ¢ä¸ºæ‚¨çš„å³æ—¶é€šä¿¡ IM åº”ç”¨çš„ SDKAppID
  }
  // åˆ›å»º SDK å®ä¾‹ï¼Œ`TIM.create()`æ–¹æ³•å¯¹äºåŒä¸€ä¸ª `SDKAppID` åªä¼šè¿”å›åŒä¸€ä»½å®ä¾‹
  const tim = TIM.create(options);// SDK å®ä¾‹é€šå¸¸ç”¨ tim è¡¨ç¤º
  // è®¾ç½® SDK æ—¥å¿—è¾“å‡ºçº§åˆ«ï¼Œè¯¦ç»†åˆ†çº§è¯·å‚è§ setLogLevel æ¥å£çš„è¯´æ˜
  // tim.setLogLevel(0); // æ™®é€šçº§åˆ«ï¼Œæ—¥å¿—é‡è¾ƒå¤šï¼Œæ¥å…¥æ—¶å»ºè®®ä½¿ç”¨
  tim.setLogLevel(1); // release çº§åˆ«ï¼ŒSDK è¾“å‡ºå…³é”®ä¿¡æ¯ï¼Œç”Ÿäº§ç¯å¢ƒæ—¶å»ºè®®ä½¿ç”¨
  // æ³¨å†Œ COS SDK æ’ä»¶
  tim.registerPlugin({ 'cos-wx-sdk': COS })
  tim.registerPlugin({ 'tim-upload-plugin': TIMUploadPlugin });
  // ç›‘å¬äº‹ä»¶ï¼Œä¾‹å¦‚ï¼š
  tim.on(TIM.EVENT.SDK_READY, (event) =&gt; {
    timStore.isImLogin = true
    Taro.setStorageSync('isImLogin', true)
    // @ts-ignore
    // eslint-disable-next-line no-undef
    wx.event.emit('SDK_ready', event.name)
    // æ”¶åˆ°ç¦»çº¿æ¶ˆæ¯å’Œä¼šè¯åˆ—è¡¨åŒæ­¥å®Œæ¯•é€šçŸ¥ï¼Œæ¥å…¥ä¾§å¯ä»¥è°ƒç”¨ sendMessage ç­‰éœ€è¦é‰´æƒçš„æ¥å£
    // event.name - TIM.EVENT.SDK_READY
  });

  tim.on(TIM.EVENT.MESSAGE_RECEIVED, (event) =&gt; {
    // è‹¥åŒæ—¶æ”¶åˆ°å¤šä¸ªä¼šè¯ éœ€è¦æ ¹æ®conversationIDæ¥åˆ¤æ–­æ˜¯å“ªä¸ªäººçš„ä¼šè¯
    const msgarr = [] as any
    const newMsgForm = event.data[0].conversationID // å®šä¹‰ä¼šè¯é”®å€¼
    if (msgarr[newMsgForm]) {
      msgarr[newMsgForm].push(event.data[0])
    } else {
      msgarr[newMsgForm] = [event.data[0]]
    }
    timStore.myMessages = msgarr
    // è¿™é‡Œå¼•å…¥äº†ä¸€ä¸ªç›‘å¬å™¨ ï¼ˆå› ä¸ºå°ç¨‹åºæ²¡æœ‰ç±»ä¼¼vuexçš„çŠ¶æ€ç®¡ç†å™¨ å½“globalé‡Œé¢çš„æ•°æ®å˜åŒ–æ—¶ä¸èƒ½åŠæ—¶åŒæ­¥åˆ°èŠå¤©é¡µé¢ å› æ­¤ è¿™ä¸ªç›‘å¬å™¨å¯ä»¥emitä¸€ä¸ªæ–¹æ³• åˆ°éœ€è¦æ›´æ–°ä¼šè¯æ•°æ®çš„é¡µé¢ åœ¨é‚£é‡Œè¿›è¡Œèµ‹å€¼ï¼‰
    // @ts-ignore
    // eslint-disable-next-line no-undef
    wx.event.emit('testFunc', msgarr, newMsgForm) // è¯¦æƒ…é¡µçš„å‡½æ•°
    // æ”¶åˆ°æ¨é€çš„å•èŠã€ç¾¤èŠã€ç¾¤æç¤ºã€ç¾¤ç³»ç»Ÿé€šçŸ¥çš„æ–°æ¶ˆæ¯ï¼Œå¯é€šè¿‡éå† event.data è·å–æ¶ˆæ¯åˆ—è¡¨æ•°æ®å¹¶æ¸²æŸ“åˆ°é¡µé¢
    // event.name - TIM.EVENT.MESSAGE_RECEIVED
    // event.data - å­˜å‚¨ Message å¯¹è±¡çš„æ•°ç»„ - [Message]
  })
  tim.on(TIM.EVENT.MESSAGE_READ_BY_PEER, (event) =&gt; {
    // SDK æ”¶åˆ°å¯¹ç«¯å·²è¯»æ¶ˆæ¯çš„é€šçŸ¥ï¼Œå³å·²è¯»å›æ‰§ã€‚ä½¿ç”¨å‰éœ€è¦å°† SDK ç‰ˆæœ¬å‡çº§è‡³ v2.7.0 æˆ–ä»¥ä¸Šã€‚ä»…æ”¯æŒå•èŠä¼šè¯ã€‚
    const msgarr = [] as any

    const newMsgForm = event.data[0].conversationID // å®šä¹‰ä¼šè¯é”®å€¼
    if (msgarr[newMsgForm]) {
      msgarr[newMsgForm].push(event.data[0])
    } else {
      msgarr[newMsgForm] = [event.data[0]]
    }
    // @ts-ignore
    // eslint-disable-next-line no-undef
    wx.event.emit('readItem', msgarr, newMsgForm) // å‡½æ•°
    // event.name - TIM.EVENT.MESSAGE_READ_BY_PEER
    // event.data - event.data - å­˜å‚¨ Message å¯¹è±¡çš„æ•°ç»„ - [Message] - æ¯ä¸ª Message å¯¹è±¡çš„ isPeerRead å±æ€§å€¼ä¸º true
  });
  tim.on(TIM.EVENT.CONVERSATION_LIST_UPDATED, (event) =&gt; {
    // æ›´æ–°å½“å‰æ‰€æœ‰ä¼šè¯åˆ—è¡¨
    // æ³¨æ„ è¿™ä¸ªå‡½æ•°åœ¨é¦–æ¬¡ç‚¹å‡»è¿›å…¥ä¼šè¯åˆ—è¡¨çš„æ—¶å€™ä¹Ÿä¼šæ‰§è¡Œ å› æ­¤ç‚¹å‡»æ¶ˆæ¯ å¯ä»¥æ˜¾ç¤ºå½“å‰çš„æœªè¯»æ¶ˆæ¯æ•°ï¼ˆunreadCountè¡¨ç¤ºæœªè¯»æ•°ï¼‰
    timStore.isImLogin &amp;&amp; initRecentContactList()
    // æ”¶åˆ°ä¼šè¯åˆ—è¡¨æ›´æ–°é€šçŸ¥ï¼Œå¯é€šè¿‡éå† event.data è·å–ä¼šè¯åˆ—è¡¨æ•°æ®å¹¶æ¸²æŸ“åˆ°é¡µé¢
    // event.name - TIM.EVENT.CONVERSATION_LIST_UPDATED
    // event.data - å­˜å‚¨ Conversation å¯¹è±¡çš„æ•°ç»„ - [Conversation]
  });

  tim.on(TIM.EVENT.SDK_NOT_READY, (event) =&gt; {
    timStore.isImLogin = false
    Taro.setStorageSync('isImLogin', false)
    loginIm_TIM(userInfo.adventureNo)
    // @ts-ignore
    // eslint-disable-next-line no-undef
    wx.event.emit('SDK_no_ready', event.name)
    // æ”¶åˆ° SDK è¿›å…¥ not ready çŠ¶æ€é€šçŸ¥ï¼Œæ­¤æ—¶ SDK æ— æ³•æ­£å¸¸å·¥ä½œ
    // event.name - TIM.EVENT.SDK_NOT_READY
  });

  tim.on(TIM.EVENT.KICKED_OUT, (event) =&gt; {
    Taro.setStorageSync('isImLogin', false)
    timStore.isImLogin = false;
    // æ”¶åˆ°è¢«è¸¢ä¸‹çº¿é€šçŸ¥
    // event.name - TIM.EVENT.KICKED_OUT
    // event.data.type - è¢«è¸¢ä¸‹çº¿çš„åŸå› ï¼Œä¾‹å¦‚:
    //    - TIM.TYPES.KICKED_OUT_MULT_ACCOUNT å¤šå®ä¾‹ç™»å½•è¢«è¸¢
    //    - TIM.TYPES.KICKED_OUT_MULT_DEVICE å¤šç»ˆç«¯ç™»å½•è¢«è¸¢
    //    - TIM.TYPES.KICKED_OUT_USERSIG_EXPIRED ç­¾åè¿‡æœŸè¢«è¸¢
  })
  timStore.tim = tim;
}
// ç™»å½•
const loginIm_TIM = userID =&gt; {
  const id = userID ? userID : userInfo.adventureNo
  if (!!id &amp;&amp; !timStore.isImLogin) {
    // å¼€å§‹ç™»å½•
    get(`/im/getUserSign?adventureNo=${id}`).then(res =&gt; {
      Taro.setStorageSync('userSig', res.data)
      const promise = timStore.tim.login({
        userID: String(id),
        userSig: res.data
      });
      promise.then((imResponse) =&gt; {
        Taro.setStorageSync('isImLogin', true)
        timStore.isImLogin = true
        setTimeout(() =&gt; {
          // æ‹‰å–ä¼šè¯åˆ—è¡¨
          timStore.isImLogin &amp;&amp; initRecentContactList()
        }, 1000);
      }).catch((imError) =&gt; {
        // Taro.showToast({
        //   title: 'login error' + imError,
        //   icon: 'none',
        //   duration: 3000
        // })
      });
    })
  }
}

// ä¼šè¯åˆ—è¡¨
const initRecentContactList = () =&gt; {
  const promise = timStore.tim.getConversationList();
  if (!promise) {
    // Taro.showToast({
    //   title: 'SDK not ready',
    //   icon: 'none',
    //   duration: 3000
    // })
    return
  }
  let conversationList = [] as any
  promise.then((imResponse) =&gt; {
    // å¦‚æœæœ€åä¸€æ¡æ¶ˆæ¯æ˜¯è‡ªå®šä¹‰æ¶ˆæ¯çš„è¯ï¼Œå¤„ç†ä¸€ä¸‹data
    conversationList = imResponse.data.conversationList; // ä¼šè¯åˆ—è¡¨ï¼Œç”¨è¯¥åˆ—è¡¨è¦†ç›–åŸæœ‰çš„ä¼šè¯åˆ—è¡¨
    conversationList.forEach(event =&gt; {
      if (event.lastMessage.type === 'TIMCustomElem') {
        const data = event.lastMessage.payload.data
        let new_data = ''
        if (typeof (data) === 'string' &amp;&amp; data) {
          new_data = JSON.parse(data)
        }
        event.lastMessage.payload.data = new_data
      }
    })
    let number = 0
    conversationList.forEach(ele =&gt; {
      number = number + ele.unreadCount
    })
    // console.log('initRecentContactList', number)
    //æ›´æ–°è·å–æœªè¯»æ¶ˆæ¯è§’æ ‡ é‡‡ç”¨äº†mboxæ–¹å¼ä¼ å…¥
    roomStore.updateRoomNum(number)
    const list = conversationList as any
    // @ts-ignore
    // eslint-disable-next-line no-undef
    wx.event.emit('conversationList', list) // å‡½æ•°
    timStore.conversationList = list
    Taro.setStorageSync('conversationList', list)
  }).catch((imError) =&gt; {
    // Taro.showToast({
    //   title: 'getConversationList error:' + imError,
    //   icon: 'none',
    //   duration: 3000
    // })
  })
}
// åˆ é™¤ä¼šè¯
function deleteConversation_TIM(ID) {
  const promise = timStore.tim.deleteConversation(ID);
  promise.then((imResponse) =&gt; {
    // åˆ é™¤æˆåŠŸã€‚
    const { conversationID } = imResponse.data;// è¢«åˆ é™¤çš„ä¼šè¯ ID
    const oldList = Taro.getStorageSync('conversationList')
    const newList = oldList.filter((item: any) =&gt; conversationID !== item.conversationID)
    Taro.setStorageSync('conversationList', newList)
  })
}

export { iminit_TIM, loginIm_TIM, initRecentContactList, deleteConversation_TIM }
</code></pre>
<h3 id="è·å–åˆ—è¡¨">è·å–åˆ—è¡¨</h3>
<p>hooksæ–¹å¼</p>
<pre><code>const [list, setList] = useState([] as any);
 useEffect(() =&gt; {
    // @ts-ignore
    // eslint-disable-next-line no-undef
    wx.event.on(&quot;conversationList&quot;, (lists: any) =&gt; {
      if (lists.length &gt; 0) {
        timStore.isImLogin &amp;&amp;
          setList(
            lists ? lists : timStore.conversationList
          );
      }
    });
  }, []);
</code></pre>
<h3 id="è·å–èŠå¤©ä¼šè¯">è·å–èŠå¤©ä¼šè¯</h3>
<pre><code> // å‘é€ä¿¡æ¯
const [sendMsg, setSendMsg] = useState(&quot;&quot; as any);
// imå®æ—¶èŠå¤©æ•°æ®
const [toView, setToView] = useState(&quot;&quot; as any);
// ç”¨äºç»­æ‹‰ï¼Œåˆ†é¡µç»­æ‹‰æ—¶éœ€ä¼ å…¥è¯¥å­—æ®µã€‚
const [nextReqMessageID, setNextReqMessageID] = useState(&quot;&quot; as any);
// è¡¨ç¤ºæ˜¯å¦å·²ç»æ‹‰å®Œæ‰€æœ‰æ¶ˆæ¯ã€‚
const [isCompleted, setIsCompleted] = useState(&quot;&quot; as any);

// æ¶ˆæ¯åˆ—è¡¨
const [myMessages, setmyMessages] = useState([] as any);
const [more_text, setmore_text] = useState(&quot;&quot;);
const [is_lock, setis_lock] = useState(true);

// è¯­éŸ³æ“ä½œ
const [title, settitle] = useState(&quot;æ­£åœ¨å½•éŸ³&quot;);
const [isRecording, setisRecording] = useState(false);
// æ‹‰å–ä¼šè¯åˆ—è¡¨
const getMsgList = () =&gt; {
  const param = {
      //sendId ä¸ºå¯¹æ–¹id
    conversationID: &quot;C2C&quot; + sendId,
    count: 15,
    nextReqMessageID
  };
  const promise = timStore.tim.getMessageList(param);

  promise
    .then(imResponse =&gt; {
      const messageList = imResponse.data.messageList; // æ¶ˆæ¯åˆ—è¡¨ã€‚
      // å¤„ç†è‡ªå®šä¹‰çš„æ¶ˆæ¯
      messageList.forEach(event =&gt; {
        if (event.type === &quot;TIMCustomElem&quot;) {
          if (typeof event.payload.data === &quot;string&quot; &amp;&amp; event.payload.data) {
            const new_data = JSON.parse(event.payload.data);
            event.payload.data = new_data;
          }
        }
      });
      const newNextReqMessageID = imResponse.data.nextReqMessageID; // ç”¨äºç»­æ‹‰ï¼Œåˆ†é¡µç»­æ‹‰æ—¶éœ€ä¼ å…¥è¯¥å­—æ®µã€‚
      const newIsCompleted = imResponse.data.isCompleted; // è¡¨ç¤ºæ˜¯å¦å·²ç»æ‹‰å®Œæ‰€æœ‰æ¶ˆæ¯ã€‚
      // å°†æŸä¼šè¯ä¸‹æ‰€æœ‰æœªè¯»æ¶ˆæ¯å·²è¯»ä¸ŠæŠ¥
      setMessageRead();
      setmyMessages(messageList);
      setIsCompleted(newIsCompleted);
      setNextReqMessageID(newNextReqMessageID);
      setmore_text(newIsCompleted ? &quot;æ²¡æœ‰æ›´å¤šäº†&quot; : &quot;ä¸‹æ‹‰æŸ¥çœ‹æ›´å¤šå†å²ä¿¡æ¯&quot;);
      scrollToBottom(messageList.length - 1);
    })
    .catch(imError =&gt; {
      // console.warn(&quot;getConversationList error:&quot;, imError); // è·å–ä¼šè¯åˆ—è¡¨å¤±è´¥çš„ç›¸å…³ä¿¡æ¯
    });
};
</code></pre>
<h3 id="å·²è¯»å›æ‰§">å·²è¯»å›æ‰§</h3>
<pre><code>// å·²è¯»å›æ‰§
  // @ts-ignore
  // eslint-disable-next-line no-undef
  wx.event.on(&quot;readItem&quot;, (ele, newMsgForm) =&gt; {
    if (newMsgForm === `C2C${sendId}` &amp;&amp; timStore.isDetail) {
      const newmsg = ele[`C2C${sendId}`];
      const oldItems = deepCopy(myMessages);
      if (newmsg) {
        newmsg.forEach(event =&gt; {
          if (event.type === &quot;TIMCustomElem&quot;) {
            if (typeof event.payload.data === &quot;string&quot; &amp;&amp; event.payload.data) {
              const new_data = JSON.parse(event.payload.data);
              event.payload.data = new_data;
            }
          }
        });
        let newitems = oldItems.filter(
          (item: any) =&gt; !newmsg.some((dom: any) =&gt; dom.ID === item.ID)
        );
        newitems = [...newitems, ...newmsg];
        setmyMessages(newitems);
        scrollToBottom(newitems.length - 1);
      }
    }
  });
</code></pre>
<h3 id="æ¥å—åˆ°æ–°æ¶ˆæ¯">æ¥å—åˆ°æ–°æ¶ˆæ¯</h3>
<pre><code> // @ts-ignore
  // eslint-disable-next-line no-undef
  wx.event.on(&quot;testFunc&quot;, (ele, newMsgForm) =&gt; {
    if (newMsgForm === `C2C${sendId}` &amp;&amp; timStore.isDetail) {
      const newmsg = ele[`C2C${sendId}`];
      let oldMss = myMessages;
      if (newmsg) {
        newmsg.forEach(event =&gt; {
          if (event.type === &quot;TIMCustomElem&quot;) {
            if (
              typeof event.payload.data === &quot;string&quot; &amp;&amp;
              event.payload.data
            ) {
              const new_data = JSON.parse(event.payload.data);
              event.payload.data = new_data;
            }
          }
          if (!event.isRead) {
            oldMss = [...oldMss, ...newmsg];
          }
        });
        setmyMessages(oldMss);
        scrollToBottom(oldMss.length - 1);
      }
      setMessageRead();
    }
  });
</code></pre>
<h3 id="è®¾ç½®å·²è¯»ä¸ŠæŠ¥">è®¾ç½®å·²è¯»ä¸ŠæŠ¥</h3>
<pre><code>const setMessageRead = () =&gt; {
    const promise = timStore.tim.setMessageRead({
      conversationID: &quot;C2C&quot; + sendId
    });
    promise
      .then(imResponse =&gt; {
        initRecentContactList();
        // å·²è¯»ä¸ŠæŠ¥æˆåŠŸ
        let noready = 0;
        const messages = myMessages as any;
        messages.forEach(event =&gt; {
          if (!event.isRead) {
            noready++;
          }
        });
        const number = Taro.getStorageSync(&quot;number_msg&quot;);
        const newNumber = number - noready;
        Taro.setStorageSync(&quot;number_msg&quot;, newNumber);
        roomStore.updateRoomNum(newNumber);
      })
      .catch(imError =&gt; {
        // å·²è¯»ä¸ŠæŠ¥å¤±è´¥
        // console.warn(&quot;setMessageRead error:&quot;, imError);
      });
  };
</code></pre>
<h3 id="å‘é€æ–‡æœ¬æ¶ˆæ¯">å‘é€æ–‡æœ¬æ¶ˆæ¯</h3>
<pre><code> // å‘é€æ™®é€šæ–‡æœ¬æ¶ˆæ¯
  const bindConfirm = () =&gt; {
    if (is_lock) {
      setis_lock(false);
      if (sendMsg.length === 0) {
        Taro.showToast({
          title: &quot;æ¶ˆæ¯ä¸èƒ½ä¸ºç©º!&quot;,
          icon: &quot;none&quot;
        });
        setis_lock(true);
        return;
      }

      const content = {
        text: sendMsg
      };

      const options = {
        to: sendId, // æ¶ˆæ¯çš„æ¥æ”¶æ–¹
        conversationType: TIM.TYPES.CONV_C2C, // ä¼šè¯ç±»å‹å–å€¼timStore.tim.TYPES.CONV_C2Cæˆ–timStore.tim.TYPES.CONV_GROUP
        payload: content // æ¶ˆæ¯å†…å®¹çš„å®¹å™¨
      };
      // // å‘é€æ–‡æœ¬æ¶ˆæ¯ï¼ŒWeb ç«¯ä¸å°ç¨‹åºç«¯ç›¸åŒ
      // 1. åˆ›å»ºæ¶ˆæ¯å®ä¾‹ï¼Œæ¥å£è¿”å›çš„å®ä¾‹å¯ä»¥ä¸Šå±
      const message = timStore.tim.createTextMessage(options);
      // 2. å‘é€æ¶ˆæ¯
      sendMessageFun(message, &quot;text&quot;);
    }
  };
</code></pre>
<h3 id="å‘é€è¯­éŸ³å›¾ç‰‡å’Œè§†é¢‘æ¶ˆæ¯">å‘é€è¯­éŸ³å›¾ç‰‡å’Œè§†é¢‘æ¶ˆæ¯</h3>
<pre><code> // å‘é€è¯­éŸ³æ¶ˆæ¯
const bindAudioMessage = res =&gt; {
 // 4. åˆ›å»ºæ¶ˆæ¯å®ä¾‹ï¼Œæ¥å£è¿”å›çš„å®ä¾‹å¯ä»¥ä¸Šå±
 const message = timStore.tim.createAudioMessage({
   to: sendId, // æ¶ˆæ¯çš„æ¥æ”¶æ–¹
   conversationType: TIM.TYPES.CONV_C2C,
   payload: {
     file: res
   }
 });
 sendMessageFun(message, &quot;voice&quot;);
};
// å‘é€è§†é¢‘
const createVideoMessage = res =&gt; {
 // 2. åˆ›å»ºæ¶ˆæ¯å®ä¾‹ï¼Œæ¥å£è¿”å›çš„å®ä¾‹å¯ä»¥ä¸Šå±
 const message = timStore.tim.createVideoMessage({
   to: sendId,
   conversationType: TIM.TYPES.CONV_C2C,
   payload: {
     file: res
   }
 });
 // 3. å‘é€æ¶ˆæ¯
 sendMessageFun(message, &quot;video&quot;);
};
// å‘é€å›¾ç‰‡
const createImageMessage = res =&gt; {
 const message = timStore.tim.createImageMessage({
   to: sendId,
   conversationType: TIM.TYPES.CONV_C2C,
   payload: {
     file: res
   },
   onProgress(event) {
     setProgress(event);
   }
 });
 sendMessageFun(message, &quot;image&quot;);
};
</code></pre>
<h3 id="å‘é€æ¶ˆæ¯å°è£…">å‘é€æ¶ˆæ¯å°è£…</h3>
<pre><code>const sendMessageFun = (message, type) =&gt; {
    Taro.showLoading({ title: &quot;å‘é€ä¸­&quot; });
    const promise = timStore.tim.sendMessage(message);
    promise.then(imResponse =&gt; {
      // å‘é€æˆåŠŸ
      setMessageRead();
      const messageList = myMessages as any;
      messageList.push(imResponse.data.message);
      setis_lock(true);
      setmyMessages(messageList);
      clearInput();
      scrollToBottom(messageList.length - 1);
      Taro.hideLoading({});
    });
  };
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è…¾è®¯COSä¸Šä¼ å›¾ç‰‡å°è£…]]></title>
        <id>https://ihopefulchina.github.io/oi4CnmXh7/</id>
        <link href="https://ihopefulchina.github.io/oi4CnmXh7/">
        </link>
        <updated>2021-07-22T03:46:47.000Z</updated>
        <summary type="html"><![CDATA[<p>cos-js-sdk-v5 å°è£… é€‚ç”¨äºå¾®ä¿¡æµè§ˆå™¨H5ç¯å¢ƒ<br>
Githubåœ°å€ï¼š<a href="https://github.com/ihopefulChina/Tencent-COS-uploads-picture">https://github.com/ihopefulChina/Tencent-COS-uploads-picture</a></p>
]]></summary>
        <content type="html"><![CDATA[<p>cos-js-sdk-v5 å°è£… é€‚ç”¨äºå¾®ä¿¡æµè§ˆå™¨H5ç¯å¢ƒ<br>
Githubåœ°å€ï¼š<a href="https://github.com/ihopefulChina/Tencent-COS-uploads-picture">https://github.com/ihopefulChina/Tencent-COS-uploads-picture</a></p>
<!-- more -->
<h3 id="configts">config.ts</h3>
<pre><code>import { genID, get_suffix } from '~/tools/tools';
import { autobind } from 'core-decorators';
import COS from 'cos-js-sdk-v5';

const Bucket = 'Bucketå€¼';
const Region = 'Regionå€¼';

@autobind
export default class COSUpload {
  private getOssToken: () =&gt; Promise&lt;any&gt;

  constructor(config: {
    getOssToken: () =&gt; Promise&lt;any&gt;
  }) {
    this.getOssToken = config.getOssToken;
  }

  /**
   * æ‰¹é‡ä¸Šä¼ 
   * @param {Object} obj Bucketã€Regionã€Body è¯¦æƒ…æŸ¥çœ‹cosæ–‡æ¡£
   * @returns err || æ‰¹é‡ä¸Šä¼ filesData
   */
  uploadFiles(fileList: any) {
    // eslint-disable-next-line no-async-promise-executor
    return new Promise(async (resolve, reject) =&gt; {
      const { cos, content } = await this.getOss();
      const files = await fileList.map((fileObject: any) =&gt; {
        const file = fileObject.file ? fileObject.file : fileObject;
        const fileName = `${content.requestId}${genID(3)}.${file.path ? get_suffix(file.path) : 'png'}`;
        return {
          Bucket: Bucket,
          Region: Region,
          Key: fileName,
          StorageClass: 'STANDARD',
          Body: file,
        };
      });
      await cos.uploadFiles({
        files,
        SliceSize: 1024 * 1024 * 5,    /* è®¾ç½®å¤§äº5MBé‡‡ç”¨åˆ†å—ä¸Šä¼  */
      }, function (err: any, data: any) {
        const val = (err || data);
        const list = !err ? val.files.map((item: any) =&gt; `https://${item.data.Location}`
        ) : [];
        const newArr = list.filter((it: string) =&gt; it);
        return err ? reject(err) : resolve(newArr);
      });
    });
  }


  private async getOss() {
    const data = await this.getOssToken();
    const content = data as any;
    const credentials = data.credentials;
    // console.log(window,wx);
    const cos = new COS({
      getAuthorization: function (options: any, callback: any) {
        callback({
          TmpSecretId: credentials.tmpSecretId,
          TmpSecretKey: credentials.tmpSecretKey,
          SecurityToken: credentials.sessionToken,
          // å»ºè®®è¿”å›æœåŠ¡å™¨æ—¶é—´ä½œä¸ºç­¾åçš„å¼€å§‹æ—¶é—´ï¼Œé¿å…ç”¨æˆ·æµè§ˆå™¨æœ¬åœ°æ—¶é—´åå·®è¿‡å¤§å¯¼è‡´ç­¾åé”™è¯¯
          StartTime: data.startTime, // æ—¶é—´æˆ³ï¼Œå•ä½ç§’ï¼Œå¦‚ï¼š1580000000
          ExpiredTime: data.expiredTime, // æ—¶é—´æˆ³ï¼Œå•ä½ç§’ï¼Œå¦‚ï¼š1580000900
        });
      }
    });

    return {
      cos,
      content
    };
  }
}
</code></pre>
<h3 id="indexts">index.ts</h3>
<pre><code>import COSUpload from './config';
import { get } from &quot;~/request&quot;;

&lt;!-- getè¯·æ±‚ --&gt;
const { uploadFiles } = new COSUpload({
  getOssToken: () =&gt; get(`xxx.com/tencent/cos-token`)
});

export { uploadFiles };
</code></pre>
<h3 id="å¼•å…¥æ–‡ä»¶å†…å®¹">å¼•å…¥æ–‡ä»¶å†…å®¹</h3>
<pre><code>/**
 * @description: ç”Ÿæˆå”¯ä¸€id
 * @param {number} length æ•°å­—é•¿åº¦
 * @return {string} 
 */
export function genID(length = 3) {
    return Number(Math.random().toString().substr(3, length) + Date.now()).toString(36);
}

//è·å–æ–‡ä»¶åç§°åç¼€
export const get_suffix = (fileName: string) =&gt; {
    const suffix = fileName.substring(fileName.lastIndexOf('.') + 1);
    return suffix;
};

</code></pre>
<h3 id="ä¸Šä¼ å¤šå¼ å›¾ç‰‡ç»„ä»¶">ä¸Šä¼ å¤šå¼ å›¾ç‰‡ç»„ä»¶</h3>
<pre><code>/* ç»„ä»¶ -- ä¸Šä¼  */
import React, { useState } from &quot;react&quot;;
import WxImageViewer from &quot;react-wx-images-viewer&quot;;
import { uploadFiles } from &quot;~/components/tencent&quot;;
import { Toast } from &quot;antd-mobile&quot;;
import Compressor from &quot;compressorjs&quot;;

import styles from &quot;./index.module.less&quot;;

interface IProps {
  imgList?: string[];
  onChange: (list: string[]) =&gt; void;
  onDelete: (idx: number) =&gt; void;
  progressChange?: (percent: number) =&gt; void;
  count?: number;
}

const Index = ({ imgList = [], onChange, onDelete, count = 2 }: IProps) =&gt; {
  const [showViewer, setShowViewer] = useState(false);
  const [imgIndex, setImgIndex] = useState(0);

  const onInputChange = (e: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {
    const fileList = e.target.files;

    if (imgList.length &lt; count) {
      //ä»£è¡¨è¿˜å¯ä»¥ä¸Šä¼ 
      if (fileList &amp;&amp; fileList.length &gt; 0) {
        const newFileList = [] as any;
        for (const key in fileList) {
          if (Object.prototype.hasOwnProperty.call(fileList, key)) {
            const element = fileList[key] as any;
            element &amp;&amp; newFileList.push(element);
          }
        }
        let paths = [];
        if (imgList.length + newFileList.length &lt; count) {
          paths = newFileList;
        } else {
          //æ•°é‡è¶…è¿‡äº†
          const surplus = count - imgList.length;
          paths = newFileList.slice(0, surplus);
          // paths = newFileList.filter((item, index) =&gt; index &lt; surplus);
        }

        //å‹ç¼©å›¾ç‰‡
        const newPaths = paths.map((image: any) =&gt; {
          let newImg = image;
          new Compressor(image, {
            quality: 0.5, // 0.6 can also be used, but its not recommended to go below.
            success: (res) =&gt; (newImg = res),
          });
          return newImg;
        });
        Toast.loading(&quot;ä¸Šä¼ ä¸­...&quot;);
        uploadFiles(newPaths).then((res: any) =&gt; {
          onChange &amp;&amp; onChange([...imgList, ...res]);
          Toast.hide();
        });
      }
    }
  };

  return (
    &lt;div className={styles.upload}&gt;
      &lt;div className={styles.uploadList}&gt;
        {imgList.map((item, index) =&gt; (
          &lt;div
            key={`${item}`}
            className={styles.item}
            onClick={(event) =&gt; {
              event.stopPropagation();
              setShowViewer(true);
              setImgIndex(index);
              document
                .getElementsByTagName(&quot;body&quot;)[0]
                .setAttribute(&quot;style&quot;, &quot;overflow:hidden&quot;); //ç»™bodyæ·»åŠ overflow:hiddené˜»æ­¢é®ç½©å±‚æ»šåŠ¨ä¸»é¡µé¢æ»šåŠ¨
            }}
          &gt;
            &lt;img
              className={styles.img}
              data-preview-proto={item}
              src={item}
              alt=&quot;ä¸Šä¼ å›¾ç‰‡&quot;
            /&gt;
            &lt;img
              className={styles.del}
              src={require(&quot;./images/del.png&quot;)}
              alt=&quot;åˆ é™¤æŒ‰é’®&quot;
              onClick={(event) =&gt; {
                event.stopPropagation();
                onDelete(index);
              }}
            /&gt;
          &lt;/div&gt;
        ))}

        {imgList.length &lt; count &amp;&amp; (
          &lt;div className={styles.uploadBtn}&gt;
            &lt;input
              type=&quot;file&quot;
              name=&quot;image&quot;
              accept=&quot;image/*&quot;
              multiple={true}
              className={styles.uploadInput}
              onChange={onInputChange}
            /&gt;
            &lt;div className={styles.uploadPlus}&gt;
              &lt;img src={require(&quot;./images/plus.png&quot;)} alt=&quot;åŠ å·&quot; /&gt;
              &lt;span&gt;
                ({imgList.length}/{count})
              &lt;/span&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        )}
      &lt;/div&gt;
      {showViewer ? (
        &lt;WxImageViewer
          onClose={() =&gt; {
            setShowViewer(false);
            document.getElementsByTagName(&quot;body&quot;)[0].removeAttribute(&quot;style&quot;);
          }}
          urls={imgList}
          index={imgIndex}
        /&gt;
      ) : (
        &quot;&quot;
      )}
    &lt;/div&gt;
  );
};
export default Index;
</code></pre>
<h3 id="å¼•ç”¨ç»„ä»¶">å¼•ç”¨ç»„ä»¶</h3>
<pre><code>import Upload from &quot;~/components/upload&quot;;
&lt;Upload
                  imgList={form.discoverServiceImgs}
                  count={6}
                  onChange={(imgs) =&gt;
                    setForm({ ...form, discoverServiceImgs: imgs })
                  }
                  onDelete={(idx) =&gt;
                    setForm({
                      ...form,
                      discoverServiceImgs: form.discoverServiceImgs.filter(
                        (_value: any, _index: any) =&gt; _index !== idx
                      ),
                    })
                  }
                /&gt;

</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å‡½æ•°å¼ç»„ä»¶ä¸ç±»ç»„ä»¶æœ‰ä½•ä¸åŒï¼Ÿ]]></title>
        <id>https://ihopefulchina.github.io/dBAsSzkYF/</id>
        <link href="https://ihopefulchina.github.io/dBAsSzkYF/">
        </link>
        <updated>2021-02-09T07:05:53.000Z</updated>
        <summary type="html"><![CDATA[<blockquote>
<p>å‡½æ•°å¼ç»„ä»¶æ•è·äº†æ¸²æŸ“æ‰€ç”¨çš„å€¼ã€‚ï¼ˆFunction components capture the rendered values.ï¼‰</p>
</blockquote>
]]></summary>
        <content type="html"><![CDATA[<blockquote>
<p>å‡½æ•°å¼ç»„ä»¶æ•è·äº†æ¸²æŸ“æ‰€ç”¨çš„å€¼ã€‚ï¼ˆFunction components capture the rendered values.ï¼‰</p>
</blockquote>
<!-- more -->
<p>ä½œè€…æ˜¯ <a href="https://mobile.twitter.com/dan_abramov">Dan Abramov</a> , Facebook React æ ¸å¿ƒå¼€å‘ï¼ŒRedux ä½œè€…</p>
<h3 id="åšå®¢åœ°å€">åšå®¢åœ°å€</h3>
<p><a href="https://overreacted.io/zh-hans/how-are-function-components-different-from-classes/">https://overreacted.io/zh-hans/how-are-function-components-different-from-classes/</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[useEffect å®Œæ•´æŒ‡å—]]></title>
        <id>https://ihopefulchina.github.io/hmJz132Dl/</id>
        <link href="https://ihopefulchina.github.io/hmJz132Dl/">
        </link>
        <updated>2021-02-09T06:33:23.000Z</updated>
        <summary type="html"><![CDATA[<p>æœ€è¿‘çœ‹äº†ä¸€ç¯‡blogæ–‡ç« ï¼Œä½œè€…æ˜¯ <a href="https://mobile.twitter.com/dan_abramov">Dan Abramov</a> , Facebook React æ ¸å¿ƒå¼€å‘ï¼ŒRedux ä½œè€…ï¼Œä»–è¿™ç¯‡åšå®¢å†™çš„éå¸¸å¥½ï¼Œå¾ˆè¯¦æƒ…ä»‹ç»äº†useEffectï¼Œæ¨èå¤§å®¶å»çœ‹çœ‹ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>æœ€è¿‘çœ‹äº†ä¸€ç¯‡blogæ–‡ç« ï¼Œä½œè€…æ˜¯ <a href="https://mobile.twitter.com/dan_abramov">Dan Abramov</a> , Facebook React æ ¸å¿ƒå¼€å‘ï¼ŒRedux ä½œè€…ï¼Œä»–è¿™ç¯‡åšå®¢å†™çš„éå¸¸å¥½ï¼Œå¾ˆè¯¦æƒ…ä»‹ç»äº†useEffectï¼Œæ¨èå¤§å®¶å»çœ‹çœ‹ã€‚</p>
<!-- more -->
<blockquote>
<p>ç›®å‰ä¸ºæ­¢ï¼ŒuseEffectä¸»è¦ç”¨äºæ•°æ®è¯·æ±‚ã€‚ä½†æ˜¯æ•°æ®è¯·æ±‚å‡†ç¡®è¯´å¹¶ä¸æ˜¯ä¸€ä¸ªåŒæ­¥é—®é¢˜ã€‚å› ä¸ºæˆ‘ä»¬çš„ä¾èµ–ç»å¸¸æ˜¯[]æ‰€ä»¥è¿™ä¸€ç‚¹å°¤å…¶æ˜æ˜¾ã€‚é‚£æˆ‘ä»¬ç©¶ç«Ÿåœ¨åŒæ­¥ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
<h3 id="åšå®¢åœ°å€">åšå®¢åœ°å€</h3>
<p><a href="https://overreacted.io/zh-hans/a-complete-guide-to-useeffect/">https://overreacted.io/zh-hans/a-complete-guide-to-useeffect/</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è·å–å½“å‰åˆ†ç±»ä¸‹çš„æ‰€æœ‰å­åˆ†ç±»]]></title>
        <id>https://ihopefulchina.github.io/huo-qu-dang-qian-fen-lei-xia-de-suo-you-zi-fen-lei/</id>
        <link href="https://ihopefulchina.github.io/huo-qu-dang-qian-fen-lei-xia-de-suo-you-zi-fen-lei/">
        </link>
        <updated>2019-08-22T07:17:48.000Z</updated>
        <summary type="html"><![CDATA[<p>ä¸€èˆ¬ç”¨äºtaxonomyåˆ†ç±»é¡µé¢ï¼Œæ¯”å¦‚äº§å“productsï¼Œä¸‹é¢æœ‰aè¿™ä¸ªåˆ†ç±»ï¼Œaä¸‹é¢æœ‰a-1,a-2,a-3...</p>
<p>å¦‚ä½•åœ¨è¿›å…¥aåˆ†ç±»è¿™ä¸ªé¡µé¢çš„æ—¶å€™ï¼Œè¾“å‡ºè¿™ä¸ªaä¸‹é¢çš„å­åˆ†ç±»ï¼Ÿ</p>
]]></summary>
        <content type="html"><![CDATA[<p>ä¸€èˆ¬ç”¨äºtaxonomyåˆ†ç±»é¡µé¢ï¼Œæ¯”å¦‚äº§å“productsï¼Œä¸‹é¢æœ‰aè¿™ä¸ªåˆ†ç±»ï¼Œaä¸‹é¢æœ‰a-1,a-2,a-3...</p>
<p>å¦‚ä½•åœ¨è¿›å…¥aåˆ†ç±»è¿™ä¸ªé¡µé¢çš„æ—¶å€™ï¼Œè¾“å‡ºè¿™ä¸ªaä¸‹é¢çš„å­åˆ†ç±»ï¼Ÿ</p>
<!-- more -->
<p>è§£å†³æ€è·¯:<br>
1.é¦–å…ˆé€šè¿‡<code>get_categories</code>è·å–æ‰€æœ‰åˆ†ç±»çš„slugå’Œid</p>
<pre><code>$test = get_categories(&quot;taxonomy=product&amp;hide_empty=0&quot;);
						$cats=array(); 
						foreach($test as $tmpcat){
							if($tmpcat-&gt;parent==0){
								$cats[$tmpcat-&gt;term_id]['slug']=$tmpcat-&gt;slug;
								$cats[$tmpcat-&gt;term_id]['term_id']=$tmpcat-&gt;term_id;
							}
						}
</code></pre>
<p>3.ç„¶ååˆ‡å‰²åˆ†ç»„å½“å‰urlï¼Œåˆ¤æ–­slugæ˜¯å¦ç­‰äºå½“å‰çš„url</p>
<pre><code>$uri=explode('/',$_SERVER['REQUEST_URI']);
</code></pre>
<p>5.ç­‰äºçš„è¯ï¼Œå†æ ¹æ®<code>get_categories</code>åŠ ä¸Šchild_of=ï¼Œæœ€åforeachè¾“å‡ºæ‰€æœ‰åˆ†ç±»ã€‚</p>
<pre><code>foreach($cats as $key=&gt;$val){
							if($cats[$key]['slug']==$uri[2]){
								$id = $cats[$key]['term_id'];
								$cate = get_categories(&quot;depth=0&amp;hide_empty=0&amp;title_li=&amp;orderby=ID&amp;order=ASC&amp;taxonomy=product&amp;child_of=$id&quot;);
								foreach ($cate as $key =&gt; $value) {?&gt;
									&lt;div class=&quot;swiper-slide&quot;&gt;
										&lt;li class=&quot;cat-item&lt;?php if($value-&gt;slug == $uri[3]){ echo ' current-cat';}?&gt;&quot;&gt;&lt;a href=&quot;/products/&lt;?php echo $uri[2];?&gt;/&lt;?php echo $value-&gt;slug; ?&gt;/&quot;&gt;&lt;?php echo $value-&gt;name;?&gt;&lt;/a&gt;&lt;/li&gt;
									&lt;/div&gt;
								&lt;?php }
							}
						}
</code></pre>
<p>å®Œæ•´çš„</p>
<pre><code>&lt;?php 
						$test = get_categories(&quot;taxonomy=product&amp;hide_empty=0&quot;);
						$cats=array(); 
						foreach($test as $tmpcat){
							if($tmpcat-&gt;parent==0){
								$cats[$tmpcat-&gt;term_id]['slug']=$tmpcat-&gt;slug;
								$cats[$tmpcat-&gt;term_id]['term_id']=$tmpcat-&gt;term_id;
							}
						}
						foreach($cats as $key=&gt;$val){
							if($cats[$key]['slug']==$uri[2]){
								$id = $cats[$key]['term_id'];
								$cate = get_categories(&quot;depth=0&amp;hide_empty=0&amp;title_li=&amp;orderby=ID&amp;order=ASC&amp;taxonomy=product&amp;child_of=$id&quot;);
								foreach ($cate as $key =&gt; $value) {?&gt;
									&lt;div class=&quot;swiper-slide&quot;&gt;
										&lt;li class=&quot;cat-item&lt;?php if($value-&gt;slug == $uri[3]){ echo ' current-cat';}?&gt;&quot;&gt;&lt;a href=&quot;/products/&lt;?php echo $uri[2];?&gt;/&lt;?php echo $value-&gt;slug; ?&gt;/&quot;&gt;&lt;?php echo $value-&gt;name;?&gt;&lt;/a&gt;&lt;/li&gt;
									&lt;/div&gt;
								&lt;?php }
							}
						}
						?&gt;
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å¦‚ä½•è§£å†³é¡µé¢/æ–‡ç« /è¯¦æƒ…é¡µéœ€è¦ä¸åŒæ ·å¼ã€æ¨¡æ¿çš„é—®é¢˜ï¼Ÿ]]></title>
        <id>https://ihopefulchina.github.io/ru-he-jie-jue-ye-mian-wen-zhang-xiang-qing-ye-xu-yao-bu-tong-yang-shi-mo-ban-de-wen-ti/</id>
        <link href="https://ihopefulchina.github.io/ru-he-jie-jue-ye-mian-wen-zhang-xiang-qing-ye-xu-yao-bu-tong-yang-shi-mo-ban-de-wen-ti/">
        </link>
        <updated>2019-08-22T06:48:25.000Z</updated>
        <summary type="html"><![CDATA[<p>é‡åˆ°ä¸€ä¸ªå®¢æˆ·ï¼Œä»–çš„éœ€æ±‚æ˜¯åœ¨äº§å“è¯¦æƒ…é¡µæœ‰5å¥—ä¸åŒçš„æ¨¡æ¿ï¼Œéœ€è¦åœ¨åå°è‡ªå·±å¯ä»¥é€‰æ‹©ä¸åŒæ¨¡æ¿ï¼Œå¡«å†™ä¸åŒçš„å†…å®¹ã€‚</p>
<p>ä¸€å¼€å§‹çŸ¥é“è¿™ä¸ªéœ€æ±‚å¾ˆæ‡µï¼Œåæ¥æˆ‘ç†æ¸…æ¥šäº†æ€è·¯ï¼Œè§£å†³äº†è¿™ä¸ªé—®é¢˜:</p>
]]></summary>
        <content type="html"><![CDATA[<p>é‡åˆ°ä¸€ä¸ªå®¢æˆ·ï¼Œä»–çš„éœ€æ±‚æ˜¯åœ¨äº§å“è¯¦æƒ…é¡µæœ‰5å¥—ä¸åŒçš„æ¨¡æ¿ï¼Œéœ€è¦åœ¨åå°è‡ªå·±å¯ä»¥é€‰æ‹©ä¸åŒæ¨¡æ¿ï¼Œå¡«å†™ä¸åŒçš„å†…å®¹ã€‚</p>
<p>ä¸€å¼€å§‹çŸ¥é“è¿™ä¸ªéœ€æ±‚å¾ˆæ‡µï¼Œåæ¥æˆ‘ç†æ¸…æ¥šäº†æ€è·¯ï¼Œè§£å†³äº†è¿™ä¸ªé—®é¢˜:</p>
<!-- more -->
<ol>
<li>
<p>é¦–å…ˆé€šè¿‡<a href="https://www.advancedcustomfields.com/resources/radio-button/">ACFæ’ä»¶Seclectçš„å•é€‰æŒ‰é’®</a>ï¼Œå¡«å†™5ä¸ªå‚æ•°<br>
(æ³¨: å‚æ•°' : 'å‰åéœ€è¦æœ‰ç©ºæ ¼)<br>
<img src="https://ihopefulchina.github.io/post-images/1566457009571.png" alt="" loading="lazy"></p>
</li>
<li>
<p>é€šè¿‡<a href="https://www.advancedcustomfields.com/resources/group/">ACFæ’ä»¶çš„ç»„</a>æ¥å†™5ä¸ªæ¨¡æ¿(ç»„ä¸‹é¢å¡«å†™ä¸åŒçš„è‡ªå®šä¹‰å­—æ®µ)</p>
</li>
</ol>
<figure data-type="image" tabindex="1"><img src="https://ihopefulchina.github.io/post-images/1566456898881.png" alt="" loading="lazy"></figure>
<p>æ³¨:<br>
(1)éœ€è¦å¡«å†™åˆ¤æ–­(æ¡ä»¶é€»è¾‘)</p>
<figure data-type="image" tabindex="2"><img src="https://ihopefulchina.github.io/post-images/1566457679886.png" alt="" loading="lazy"></figure>
<p>(2)å…¶ä¸­æ¯ä¸ªæ¨¡æ¿Groupé‡Œé¢çš„è¯´æ˜æœ€å¥½åŠ ä¸Šæ¨¡æ¿å›¾ç‰‡æ ·å¼ï¼Œä¾‹å¦‚<code>&lt;img src=&quot;/wp-admin/images/sj.png&quot; width=&quot;50%&quot; height=&quot;auto&quot;&gt;</code><br>
è¿™ä¹ˆåšçš„ç›®çš„ï¼Œæ˜¯å®¢æˆ·çŸ¥é“è¿™æ˜¯å“ªä¸ªæ¨¡æ¿æ ·å¼ï¼Œå‘ˆç°çš„æ•ˆæœå¦‚ä¸‹ã€‚</p>
<figure data-type="image" tabindex="3"><img src="https://ihopefulchina.github.io/post-images/1566457148348.png" alt="" loading="lazy"></figure>
<p>3.ç„¶ååˆ›å»º5ä¸ªphpï¼Œå‘½åè§„é¿pageï¼Œsingleç­‰ç­‰è‡ªå¸¦çš„å‘½åæ–¹å¼ï¼Œé‡Œé¢å¡«å†™å„è‡ªæ¨¡æ¿æ ·å¼å’Œå‚æ•°ã€‚</p>
<figure data-type="image" tabindex="4"><img src="https://ihopefulchina.github.io/post-images/1566457258241.png" alt="" loading="lazy"></figure>
<p>5.æœ€ååœ¨single-products.phpé‡Œé¢ï¼ŒåŠ ä¸€ä¸ªåˆ¤æ–­:</p>
<pre><code>&lt;?php if( get_field('select') == 'one' ): ?&gt;
		&lt;?php include 'product-content1.php'; ?&gt;
	&lt;?php endif; ?&gt;

	&lt;?php if( get_field('select') == 'two' ): ?&gt;
		&lt;?php include 'product-content2.php'; ?&gt;
	&lt;?php endif; ?&gt;

	&lt;?php if( get_field('select') == 'three' ): ?&gt;
		&lt;?php include 'product-content3.php'; ?&gt;
	&lt;?php endif; ?&gt;

	&lt;?php if( get_field('select') == 'four' ): ?&gt;
		&lt;?php include 'product-content4.php'; ?&gt;
	&lt;?php endif; ?&gt;

	&lt;?php if( get_field('select') == 'five' ): ?&gt;
		&lt;?php include 'product-content5.php'; ?&gt;
	&lt;?php endif; ?&gt;
</code></pre>
<p>å…¶ä¸­çš„oneï¼Œtwo... æ¥è‡ªACFæ’ä»¶Seclectçš„å•é€‰æŒ‰é’®å‰é¢çš„å‚æ•°</p>
]]></content>
    </entry>
</feed>